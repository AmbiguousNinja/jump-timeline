<html>
<head>
    <script src="data.js"></script>
    <!-- JQuery -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
<div class="container-fluid">
    <div class="container">
        <div class="row">
            <div class="col-md-3">
                <form id="theform">
                    <h1>Enter a Year</h1>
                    <div class="input-group input-group-sm">
                        <input class="form-control" type="text" name="searchBox" placeholder="1960" value="2017">
                        <div class="input-group-btn"><button type="submit" class="btn btn-block btn-primary">Submit</button></div>
                    </div>
                </form>
            </div>
            <div class="col-md-9">
                <h1>List of Jump Serializations</h1>
                <table id="data" class="table table-striped table-bordered">
                    <thead>
                        <!-- <th>Decade</th> -->
                        <th>Name</th>
                        <!-- <th>Japanese</th> -->
                        <th>Start Year</th>
                        <th>Volume</th>
                        <th>End Year</th>
                        <th>Issues</th>
                        <th>Author1</th>
                        <th>Author2</th>
                        <th>Author3</th>
                    </thead>
                    <tbody></tbody>
                </table>
           </div>
        </div>
    </div>
</div>
</body>

<script>
$('#theform').submit(function(e){
    var table = document.getElementById("data");
    
    e.preventDefault();//stop the form from refreshing the page and allow you to use AJAX ($.post)
    e.e=$(this)//faster use of the form element
    e.s=e.e.serializeArray()//all the form elements put into an array
    e.v=encodeURIComponent(e.s[0].value)//the first element in the form's value and convert into a websafe string
    e.e.children().prop('disabled',true)//disable all inputs and buttons so the user can't keep hitting submit

    var temp = "";

    for(var i in data.priorities) {
        // var decade = data.priorities[i]['Decade']
        var name = data.priorities[i]['English Name']
        var startyear = data.priorities[i]['Start Year']
        var startvol = data.priorities[i]['Volume']
        var endyear = data.priorities[i]['End Year']
        var issues = data.priorities[i]['Issues']
        var author1 = data.priorities[i]['Author 1']
        var author2 = data.priorities[i]['Author 2']
        var author3 = data.priorities[i]['Author 3']

        if(Number(startyear) >= Number(e.v)) {
            temp += '<tr>';
            // temp += '<td>' + decade + '</td>';
            temp += '<td>' + name + '</td>';
            temp += '<td>' + startyear + '</td>';
            temp += '<td>' + startvol + '</td>';
            temp += '<td>' + endyear + '</td>';
            temp += '<td>' + issues + '</td>';
            temp += '<td>' + author1 + '</td>';
            temp += '<td>' + author2 + '</td>';
            temp += '<td>' + author3 + '</td>';
            temp += '</tr>';

            $('#data tbody').html(temp) //select id "data" then the child tag "tbody" and replace all data inside the table with temp string
        }
    }
})
</script>
   
</html>